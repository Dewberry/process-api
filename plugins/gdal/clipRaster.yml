info:
  version: '2023.2.1'
  id: clipRaster
  title: clipRaster
  description: Clip a raster based on reference vector layer
  jobControlOptions:
    - sync-execute
  outputTransmission:
    - reference

runtime:
  repository:
  image: clip-raster
  tag: latest
  description: GDAL image with jq utility
  command:
  envVars:
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE
    - S3_BUCKET
    - S3_RESULTS_DIR

inputs:
  - id: inputRaster
    title: inputRaster
    input:
      literalDataDomain:
        dataType: reference
        valueDefinition:
          anyValue: true
    minOccurs: 1
    maxOccurs: 1
  - id: maskLayer
    title: maskLayer
    input:
      literalDataDomain:
        dataType: reference
        valueDefinition:
          anyValue: true
    minOccurs: 1
    maxOccurs: 1
  - id: clippedRasterDestination
    title: clippedRasterDestination
    input:
      literalDataDomain:
        dataType: reference
        valueDefinition:
          anyValue: true
    minOccurs: 1
    maxOccurs: 1

outputs:
  - id: clippedRaster
    title: clippedRaster
    inputId: clippedRasterDestination
    output:
      transmissionMode:
      - reference

