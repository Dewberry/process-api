info:
  version: '2023.2.1'
  id: chainProcess
  title: chainProcess
  description: Checks status of a process submitted to an OGC Process API and when/if status is successful run the next job
  jobControlOptions:
    - sync-execute
  outputTransmission:
    - value

runtime:
  repository:
  image: chain-process
  tag: latest
  description: Curl image with jq utility
  entrypoint:
  envVars:
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE
    - S3_BUCKET
    - S3_RESULTS_DIR

inputs:
  - id: watchJobId
    title: watchJobId
    input:
      literalDataDomain:
        dataType: string
        valueDefinition:
          anyValue: true
    minOccurs: 1
    maxOccurs: 1
  - id: nextJobProcessId
    title: nextJobProcessId
    input:
      literalDataDomain:
        dataType: string
        valueDefinition:
          anyValue: false
          possibleValues: ['clipRaster']
    minOccurs: 1
    maxOccurs: 1
  - id: nextJobInputs
    title: nextJobInputs
    input:
      literalDataDomain:
        dataType: string
        valueDefinition:
          anyValue: true
    minOccurs: 1
    maxOccurs: 1

outputs:
  - id: nextJobId
    title: nextJobId
    output:
      formats:
        - mimeType: application/text
